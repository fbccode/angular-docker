/*!
 * gumshoejs v5.1.2
 * A simple, framework-agnostic scrollspy script.
 * (c) 2019 Chris Ferdinandi
 * MIT License
 * http://github.com/cferdinandi/gumshoe
 */Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(g){var S=this,y=this;if(!document.documentElement.contains(S))return null;do{if(y.matches(g))return y;y=y.parentElement}while(y!==null);return null}),function(){if(typeof window.CustomEvent=="function")return!1;function g(S,y){y=y||{bubbles:!1,cancelable:!1,detail:void 0};var Y=document.createEvent("CustomEvent");return Y.initCustomEvent(S,y.bubbles,y.cancelable,y.detail),Y}g.prototype=window.Event.prototype,window.CustomEvent=g}(),function(g,S){typeof define=="function"&&define.amd?define([],function(){return S(g)}):typeof exports=="object"?module.exports=S(g):g.Gumshoe=S(g)}(typeof global<"u"?global:typeof window<"u"?window:this,function(g){"use strict";var S={navClass:"active",contentClass:"active",nested:!1,nestedClass:"active",offset:0,reflow:!1,events:!0},y=function(){var h={};return Array.prototype.forEach.call(arguments,function(u){for(var f in u){if(!u.hasOwnProperty(f))return;h[f]=u[f]}}),h},Y=function(h,u,f){if(f.settings.events){var b=new CustomEvent(h,{bubbles:!0,cancelable:!0,detail:f});u.dispatchEvent(b)}},P=function(h){var u=0;if(h.offsetParent)for(;h;)u+=h.offsetTop,h=h.offsetParent;return u>=0?u:0},H=function(h){h&&h.sort(function(u,f){var b=P(u.content),x=P(f.content);return b<x?-1:1})},N=function(h){return typeof h.offset=="function"?parseFloat(h.offset()):parseFloat(h.offset)},q=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},L=function(h,u,f){var b=h.getBoundingClientRect(),x=N(u);return f?parseInt(b.bottom,10)<(g.innerHeight||document.documentElement.clientHeight):parseInt(b.top,10)<=x},$=function(){return g.innerHeight+g.pageYOffset>=q()},I=function(h,u){return!!($()&&L(h.content,u,!0))},B=function(h,u){var f=h[h.length-1];if(I(f,u))return f;for(var b=h.length-1;b>=0;b--)if(L(h[b].content,u))return h[b]},R=function(h,u){if(!(!u.nested||!h.parentNode)){var f=h.parentNode.closest("li");f&&(f.classList.remove(u.nestedClass),R(f,u))}},A=function(h,u){if(h){var f=h.nav.closest("li");f&&(f.classList.remove(u.navClass),h.content.classList.remove(u.contentClass),R(f,u),Y("gumshoeDeactivate",f,{link:h.nav,content:h.content,settings:u}))}},c=function(h,u){if(u.nested){var f=h.parentNode.closest("li");f&&(f.classList.add(u.nestedClass),c(f,u))}},O=function(h,u){if(h){var f=h.nav.closest("li");f&&(f.classList.add(u.navClass),h.content.classList.add(u.contentClass),c(f,u),Y("gumshoeActivate",f,{link:h.nav,content:h.content,settings:u}))}},G=function(h,u){var f={},b,x,w,_,E;f.setup=function(){b=document.querySelectorAll(h),x=[],Array.prototype.forEach.call(b,function(j){var F=document.getElementById(decodeURIComponent(j.hash.substr(1)));F&&x.push({nav:j,content:F})}),H(x)},f.detect=function(){var j=B(x,E);if(!j){w&&(A(w,E),w=null);return}w&&j.content===w.content||(A(w,E),O(j,E),w=j)};var V=function(j){_&&g.cancelAnimationFrame(_),_=g.requestAnimationFrame(f.detect)},T=function(j){_&&g.cancelAnimationFrame(_),_=g.requestAnimationFrame(function(){H(x),f.detect()})};f.destroy=function(){w&&A(w,E),g.removeEventListener("scroll",V,!1),E.reflow&&g.removeEventListener("resize",T,!1),x=null,b=null,w=null,_=null,E=null};var U=function(){E=y(S,u||{}),f.setup(),f.detect(),g.addEventListener("scroll",V,!1),E.reflow&&g.addEventListener("resize",T,!1)};return U(),f};return G}),function(g,S){typeof exports=="object"&&typeof module<"u"?module.exports=S():typeof define=="function"&&define.amd?define(S):(g=typeof globalThis<"u"?globalThis:g||self).jsVectorMap=S()}(this,function(){"use strict";Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(s){for(var i=(this.document||this.ownerDocument).querySelectorAll(s),e=i.length;--e>=0&&i.item(e)!==this;);return e>-1}),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(s){if(s==null)throw new TypeError("Cannot convert first argument to object");for(var i=Object(s),e=1;e<arguments.length;e++){var t=arguments[e];if(t!=null){t=Object(t);for(var n=Object.keys(Object(t)),r=0,o=n.length;r<o;r++){var a=n[r],l=Object.getOwnPropertyDescriptor(t,a);l!==void 0&&l.enumerable&&(i[a]=t[a])}}}return i}});var g={},S=1,y=function(s,i,e,t){t===void 0&&(t={});var n="jvm:"+i+"::"+S++;g[n]={selector:s,handler:e},e._uid=n,s.addEventListener(i,e,t)},Y=function(s,i,e){var t=i.split(":")[1];s.removeEventListener(t,e),delete g[e._uid]},P=function(){return g},H=function(){function s(e){return e instanceof Element?(this.selector=e,this):(this.selector=document.querySelector(e),this)}var i=s.prototype;return i.on=function(e,t,n){return n===void 0&&(n={}),y(this.selector,e,t,n),this},i.delegate=function(e,t,n){for(var r in t=t.split(" "))this.on(t[r],function(o){var a=o.target;a.matches(e)&&n.call(a,o)})},i.css=function(e){for(var t in e)this.selector.style[t]=e[t];return this},i.text=function(e){return e?(this.selector.textContent=e,this):this.selector.textContent},i.attr=function(e,t){return e&&t?(this.selector.setAttribute(e,t),this):this.selector.getAttribute(e)},i.addClass=function(e){return this.selector.classList?(this.selector.classList.add(e),this):(this.selector.className.split(" ").indexOf(e)==-1&&(this.selector.className+=" "+e),this)},i.append=function(e){return this.selector.appendChild(e),this},i.show=function(){this.css({display:"block"})},i.hide=function(){this.css({display:"none"})},i.height=function(){return this.selector.offsetHeight},i.width=function(){return this.selector.offsetWidth},s}(),N=function(s){return function(i){return!!i&&typeof i=="object"}(s)&&!function(i){var e=Object.prototype.toString.call(i);return e==="[object RegExp]"||e==="[object Date]"||function(t){return t.$$typeof===q}(i)}(s)},q=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.element"):60103;function L(s,i){return i.clone!==!1&&i.isMergeableObject(s)?A((e=s,Array.isArray(e)?[]:{}),s,i):s;var e}function $(s,i,e){return s.concat(i).map(function(t){return L(t,e)})}function I(s){return Object.keys(s).concat(function(i){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(i).filter(function(e){return i.propertyIsEnumerable(e)}):[]}(s))}function B(s,i){try{return i in s}catch{return!1}}function R(s,i,e){var t={};return e.isMergeableObject(s)&&I(s).forEach(function(n){t[n]=L(s[n],e)}),I(i).forEach(function(n){(function(r,o){return B(r,o)&&!(Object.hasOwnProperty.call(r,o)&&Object.propertyIsEnumerable.call(r,o))})(s,n)||(B(s,n)&&e.isMergeableObject(i[n])?t[n]=function(r,o){if(!o.customMerge)return A;var a=o.customMerge(r);return typeof a=="function"?a:A}(n,e)(s[n],i[n],e):t[n]=L(i[n],e))}),t}var A=function(s,i,e){(e=e||{}).arrayMerge=e.arrayMerge||$,e.isMergeableObject=e.isMergeableObject||N,e.cloneUnlessOtherwiseSpecified=L;var t=Array.isArray(i);return t===Array.isArray(s)?t?e.arrayMerge(s,i,e):R(s,i,e):L(i,e)},c={isImageUrl:function(s){return/\.(jpg|gif|png)$/.test(s)},createElement:function(s,i,e,t){t===void 0&&(t=!1);var n=document.createElement(s);return e&&(n[t?"innerHTML":"textContent"]=e),i&&(n.className=i),n},removeElement:function(s){s.parentNode.removeChild(s)},$:function(s){return new H(s)},hyphenate:function(s){return s.replace(/[\w]([A-Z])/g,function(i){return i[0]+"-"+i[1]}).toLowerCase()},isFunc:function(s){return typeof s=="function"},isObj:function(s){return typeof s=="object"},isStr:function(s){return typeof s=="string"},isArr:function(s){return Array.isArray(s)},merge:function(s,i){return Object.assign(s,i)},mergeDeeply:function(s,i){return A(s,i)},keys:function(s){return Object.keys(s)}};function O(s,i){s.prototype=Object.create(i.prototype),s.prototype.constructor=s,G(s,i)}function G(s,i){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(s,i)}var h=function(){function s(e,t){this._name=e,this.node=this.createElement(e),t&&this.set(t)}var i=s.prototype;return i.createElement=function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)},i.addClass=function(e){this.node.setAttribute("class",e)},i.getBBox=function(){return this.node.getBBox()},i.set=function(e,t){if(c.isObj(e))for(var n in e)this.applyAttr(n,e[n]);else this.applyAttr(e,t)},i.get=function(e){return this.style.initial[e]},i.applyAttr=function(e,t){this.node.setAttribute(c.hyphenate(e),t)},i.remove=function(){this.node.parentNode.removeChild(this.node)},s}(),u=function(s){function i(t,n,r){var o;return r===void 0&&(r={}),(o=s.call(this,t,n)||this).isHovered=!1,o.isSelected=!1,o.style=r,o.style.current={},o.updateStyle(),o}O(i,s);var e=i.prototype;return e.setStyle=function(t,n){var r;c.isObj(t)?c.merge(this.style.current,t):c.merge(this.style.current,((r={})[t]=n,r)),this.updateStyle()},e.updateStyle=function(){var t={};c.merge(t,this.style.initial),c.merge(t,this.style.current),this.isHovered&&c.merge(t,this.style.hover),this.isSelected&&(c.merge(t,this.style.selected),this.isHovered&&c.merge(t,this.style.selectedHover)),this.set(t)},i}(h),f=function(s){function i(e,t){return s.call(this,"text",e,t)||this}return O(i,s),i.prototype.applyAttr=function(e,t){e==="text"?this.node.textContent=t:s.prototype.applyAttr.call(this,e,t)},i}(u),b=function(s){function i(e,t){return s.call(this,"image",e,t)||this}return O(i,s),i.prototype.applyAttr=function(e,t){var n;e==="image"?(c.isObj(t)?(n=t.url,this.offset=t.offset||[0,0]):(n=t,this.offset=[0,0]),this.node.setAttributeNS("http://www.w3.org/1999/xlink","href",n),this.width=23,this.height=23,this.applyAttr("width",this.width),this.applyAttr("height",this.height),this.applyAttr("x",this.cx-this.width/2+this.offset[0]),this.applyAttr("y",this.cy-this.height/2+this.offset[1])):e=="cx"?(this.cx=t,this.width&&this.applyAttr("x",t-this.width/2+this.offset[0])):e=="cy"?(this.cy=t,this.height&&this.applyAttr("y",t-this.height/2+this.offset[1])):s.prototype.applyAttr.apply(this,arguments)},i}(u),x=function(s){function i(t){var n;return(n=s.call(this,"svg")||this)._container=t,n._defsElement=new h("defs"),n._rootElement=new h("g",{id:"jvm-regions-group"}),n.node.appendChild(n._defsElement.node),n.node.appendChild(n._rootElement.node),n._container.append(n.node),n}O(i,s);var e=i.prototype;return e.setSize=function(t,n){this.node.setAttribute("width",t),this.node.setAttribute("height",n)},e.applyTransformParams=function(t,n,r){this._rootElement.node.setAttribute("transform","scale("+t+") translate("+n+", "+r+")")},e.createPath=function(t,n){var r=new u("path",t,n);return r.node.setAttribute("fill-rule","evenodd"),this.add(r)},e.createCircle=function(t,n,r){var o=new u("circle",t,n);return this.add(o,r)},e.createLine=function(t,n,r){var o=new u("line",t,n);return this.add(o,r)},e.createText=function(t,n,r){var o=new f(t,n);return this.add(o,r)},e.createImage=function(t,n,r){var o=new b(t,n);return this.add(o,r)},e.createGroup=function(t){var n=new h("g");return this.node.appendChild(n.node),t&&(n.node.id=t),n.canvas=this,n},e.add=function(t,n){return(n=n||this._rootElement).node.appendChild(t.node),t},i}(h);function w(s,i,e){var t=c.$(i),n=t.attr("class").indexOf("jvm-region")===-1?"marker":"region",r=n==="region"?t.attr("data-code"):t.attr("data-index"),o=n+":selected";return e&&(o=n+".tooltip:show"),{event:o,type:n,code:r,element:n==="region"?s.regions[r].element:s.markers[r].element,tooltipText:n==="region"?s.mapData.paths[r].name||"":s.markers[r].config.name||""}}var _=function(){function s(){}var i=s.prototype;return i.getLabelText=function(e,t){if(t){if(c.isFunc(t.render)){var n=[];return this.config.marker&&n.push(this.config.marker),n.push(e),t.render.apply(this,n)}return e}},i.getLabelOffsets=function(e,t){return c.isFunc(t.offsets)?t.offsets(e):c.isArr(t.offsets)?t.offsets[e]:[0,0]},i.setStyle=function(e,t){this.shape.setStyle(e,t)},i.remove=function(){this.shape.remove(),this.label&&this.label.remove()},i.hover=function(e){this._setStatus("isHovered",e)},i.select=function(e){this._setStatus("isSelected",e)},i._setStatus=function(e,t){this.shape[e]=t,this.shape.updateStyle(),this[e]=t,this.label&&(this.label[e]=t,this.label.updateStyle())},s}(),E=function(s){function i(e){var t,n=e.map,r=e.code,o=e.path,a=e.style,l=e.label,p=e.labelStyle,m=e.labelsGroup;(t=s.call(this)||this).config=arguments[0],t.canvas=n.canvas,t.map=n,t.shape=t.canvas.createPath({d:o,dataCode:r},a),t.shape.addClass("jvm-region jvm-element");var v=t.shape.getBBox(),M=t.getLabelText(r,l);if(l&&M){var C=t.getLabelOffsets(r);t.labelX=v.x+v.width/2+C[0],t.labelY=v.y+v.height/2+C[1],t.label=t.canvas.createText({text:M,textAnchor:"middle",alignmentBaseline:"central",dataCode:r,x:t.labelX,y:t.labelY},p,m),t.label.addClass("jvm-region jvm-element")}return t}return O(i,s),i.prototype.updateLabelPosition=function(){this.label&&this.label.set({x:this.labelX*this.map.scale+this.map.transX*this.map.scale,y:this.labelY*this.map.scale+this.map.transY*this.map.scale})},i}(_),V=function(s){function i(e){var t,n=e.index,r=e.map,o=e.style,a=e.x1,l=e.y1,p=e.x2,m=e.y2,v=e.group;return(t=s.call(this)||this).shape=r.canvas.createLine({x1:a,y1:l,x2:p,y2:m,dataIndex:n},o,v),t.shape.addClass("jvm-line"),t}return O(i,s),i}(_);function T(s,i){return s.toLowerCase()+":to:"+i.toLowerCase()}var U=function(s){function i(t){var n,r=t.index,o=t.style,a=t.label,l=t.cx,p=t.cy,m=t.map,v=t.group;return(n=s.call(this)||this)._map=m,n._isImage=!!o.initial.image,n.config=arguments[0],n.shape=m.canvas[n._isImage?"createImage":"createCircle"]({dataIndex:r,cx:l,cy:p},n._getStyle(),v),n.shape.addClass("jvm-marker jvm-element"),n._isImage&&n.updateLabelPosition(),a&&n._createLabel(n.config),n}O(i,s);var e=i.prototype;return e.updateLabelPosition=function(){this.label&&this.label.set({x:this._labelX*this._map.scale+this._offsets[0]+this._map.transX*this._map.scale+5+(this._isImage?(this.shape.width||0)/2:this.shape.node.r.baseVal.value),y:this._labelY*this._map.scale+this._map.transY*this._map.scale+this._offsets[1]})},e._createLabel=function(t){var n=t.index,r=t.map,o=t.label,a=t.labelsGroup,l=t.cx,p=t.cy,m=t.marker,v=t.isRecentlyCreated,M=this.getLabelText(n,o);this._labelX=l/r.scale-r.transX,this._labelY=p/r.scale-r.transY,this._offsets=v&&m.offsets?m.offsets:this.getLabelOffsets(n,o),this.label=r.canvas.createText({text:M,dataIndex:n,x:this._labelX,y:this._labelY,dy:"0.6ex"},r.params.markerLabelStyle,a),this.label.addClass("jvm-marker jvm-element"),v&&this.updateLabelPosition()},e._getStyle=function(){var t={};return this._isImage?t.initial={image:this.config.style.initial.image}:t=this.config.style,t},i}(_),j=function(){function s(i){i===void 0&&(i={}),this._options=i,this._map=this._options.map,this._series=this._options.series,this._body=c.createElement("div","jvm-legend"),this._options.cssClass&&this._body.setAttribute("class",this._options.cssClass),i.vertical?this._map.legendVertical.appendChild(this._body):this._map.legendHorizontal.appendChild(this._body),this.render()}return s.prototype.render=function(){var i,e,t,n=this._series.scale.getTicks(),r=c.createElement("div","jvm-legend-inner");if(this._body.innderHTML="",this._options.title){var o=c.createElement("div","jvm-legend-title",this._options.title);this._body.appendChild(o)}this._body.appendChild(r);for(var a=0;a<n.length;a++){switch(i=c.createElement("div","jvm-legend-tick"),e=c.createElement("div","jvm-legend-tick-sample"),this._series.config.attribute){case"fill":c.isImageUrl(n[a].value)?e.style.background="url("+n[a].value+")":e.style.background=n[a].value;break;case"stroke":e.style.background=n[a].value;break;case"image":e.style.background="url("+(c.isObj(n[a].value)?n[a].value.url:n[a].value)+") no-repeat center center",e.style.backgroundSize="cover"}i.appendChild(e),t=n[a].label,this._options.labelRender&&(t=this._options.labelRender(t));var l=c.createElement("div","jvm-legend-tick-text",t);i.appendChild(l),r.appendChild(i)}},s}(),F=function(){function s(e){this._scale=e}var i=s.prototype;return i.getValue=function(e){return this._scale[e]},i.getTicks=function(){var e=[];for(var t in this._scale)e.push({label:t,value:this._scale[t]});return e},s}(),J=function(){function s(e,t,n){e===void 0&&(e={}),this._map=n,this._elements=t,this._values=e.values||{},this.config=e,this.config.attribute=e.attribute||"fill",e.attributes&&this.setAttributes(e.attributes),c.isObj(e.scale)&&(this.scale=new F(e.scale)),this.config.legend&&(this.legend=new j(c.merge({map:this._map,series:this},this.config.legend))),this.setValues(this._values)}var i=s.prototype;return i.setValues=function(e){var t={};for(var n in e)e[n]&&(t[n]=this.scale.getValue(e[n]));this.setAttributes(t)},i.setAttributes=function(e){for(var t in e)this._elements[t]&&this._elements[t].element.setStyle(this.config.attribute,e[t])},i.clear=function(){var e,t={};for(e in this._values)this._elements[e]&&(t[e]=this._elements[e].element.shape.style.initial[this.config.attribute]);this.setAttributes(t),this._values={}},s}(),W={mill:function(s,i,e){return{x:this.radius*(i-e)*this.radDeg,y:-this.radius*Math.log(Math.tan((45+.4*s)*this.radDeg))/.8}},merc:function(s,i,e){return{x:this.radius*(i-e)*this.radDeg,y:-this.radius*Math.log(Math.tan(Math.PI/4+s*Math.PI/360))}},aea:function(s,i,e){var t=e*this.radDeg,n=29.5*this.radDeg,r=45.5*this.radDeg,o=s*this.radDeg,a=i*this.radDeg,l=(Math.sin(n)+Math.sin(r))/2,p=Math.cos(n)*Math.cos(n)+2*l*Math.sin(n),m=l*(a-t),v=Math.sqrt(p-2*l*Math.sin(o))/l,M=Math.sqrt(p-2*l*Math.sin(0))/l;return{x:v*Math.sin(m)*this.radius,y:-(M-v*Math.cos(m))*this.radius}},lcc:function(s,i,e){var t=e*this.radDeg,n=i*this.radDeg,r=33*this.radDeg,o=45*this.radDeg,a=s*this.radDeg,l=Math.log(Math.cos(r)*(1/Math.cos(o)))/Math.log(Math.tan(Math.PI/4+o/2)*(1/Math.tan(Math.PI/4+r/2))),p=Math.cos(r)*Math.pow(Math.tan(Math.PI/4+r/2),l)/l,m=p*Math.pow(1/Math.tan(Math.PI/4+a/2),l),v=p*Math.pow(1/Math.tan(Math.PI/4+0),l);return{x:m*Math.sin(l*(n-t))*this.radius,y:-(v-m*Math.cos(l*(n-t)))*this.radius}}};W.degRad=180/Math.PI,W.radDeg=Math.PI/180,W.radius=6381372;var K=function(){function s(e,t){var n=e.scale,r=e.values;this._scale=n,this._values=r,this._fromColor=this.hexToRgb(n[0]),this._toColor=this.hexToRgb(n[1]),this._map=t,this.setMinMaxValues(r),this.visualize()}var i=s.prototype;return i.setMinMaxValues=function(e){for(var t in this.min=Number.MAX_VALUE,this.max=0,e)(t=parseFloat(e[t]))>this.max&&(this.max=t),t<this.min&&(this.min=t)},i.visualize=function(){var e,t={};for(var n in this._values)e=parseFloat(this._values[n]),isNaN(e)||(t[n]=this.getValue(e));this.setAttributes(t)},i.setAttributes=function(e){for(var t in e)this._map.regions[t]&&this._map.regions[t].element.setStyle("fill",e[t])},i.getValue=function(e){for(var t,n="#",r=0;r<3;r++)n+=((t=Math.round(this._fromColor[r]+(this._toColor[r]-this._fromColor[r])*((e-this.min)/(this.max-this.min))).toString(16)).length===1?"0":"")+t;return n},i.hexToRgb=function(e){var t=0,n=0,r=0;return e.length==4?(t="0x"+e[1]+e[1],n="0x"+e[2]+e[2],r="0x"+e[3]+e[3]):e.length==7&&(t="0x"+e[1]+e[2],n="0x"+e[3]+e[4],r="0x"+e[5]+e[6]),[parseInt(t),parseInt(n),parseInt(r)]},s}(),Q=Object.freeze({__proto__:null,handleContainerEvents:function(){var s,i,e=this,t=!1,n=this;this.params.draggable&&(this.container.on("mousemove",function(r){return t&&(n.transX-=(s-r.pageX)/n.scale,n.transY-=(i-r.pageY)/n.scale,n.applyTransform(),s=r.pageX,i=r.pageY,e.isBeingDragged=!0),!1}).on("mousedown",function(r){return t=!0,s=r.pageX,i=r.pageY,!1}),c.$("body").on("mouseup",function(){t=!1})),this.params.zoomOnScroll&&this.container.on("wheel",function(r){var o=0;o=(r.deltaY||-r.wheelDelta||r.detail)>>10||1,o*=75;var a=e.container.selector.getBoundingClientRect(),l=r.pageX-a.left-window.pageXOffset,p=r.pageY-a.top-window.pageYOffset,m=Math.pow(1+n.params.zoomOnScrollSpeed/1e3,-1.5*o);n.tooltip&&n.tooltip.hide(),n.setScale(n.scale*m,l,p)},{passive:!0})},handleElementEvents:function(){var s=this,i=this;this.container.delegate(".jvm-element","mousedown",function(){s.isBeingDragged=!1}),this.container.delegate(".jvm-element","mouseover mouseout",function(e){var t=w(i,this,!0),n=i.params.showTooltip;e.type==="mouseover"?e.defaultPrevented||(t.element.hover(!0),n&&(i.tooltip.text(t.tooltipText),i.tooltip.show(),i.emit(t.event,[i.tooltip,t.code]))):(t.element.hover(!1),n&&i.tooltip.hide())}),this.container.delegate(".jvm-element","mouseup",function(e){var t=w(i,this);if(!i.isBeingDragged&&!e.defaultPrevented&&(t.type==="region"&&i.params.regionsSelectable||t.type==="marker"&&i.params.markersSelectable)){var n=t.element;i.params[t.type+"sSelectableOne"]&&i.clearSelected(t.type+"s"),t.element.isSelected?n.select(!1):n.select(!0),i.emit(t.event,[t.code,n.isSelected,i.getSelected(t.type+"s")])}})},handleZoomButtons:function(){var s=this,i=this,e=c.createElement("div","jvm-zoom-btn jvm-zoomin","&#43;",!0),t=c.createElement("div","jvm-zoom-btn jvm-zoomout","&#x2212",!0);this.container.append(e).append(t),y(e,"click",function(){s.setScale(i.scale*i.params.zoomStep,i.width/2,i.height/2,!1,i.params.zoomAnimate)}),y(t,"click",function(){s.setScale(i.scale/i.params.zoomStep,i.width/2,i.height/2,!1,i.params.zoomAnimate)})},bindContainerTouchEvents:function(){var s,i,e,t,n,r,o,a=this,l=function(p){var m,v,M,C,d=p.touches;if(p.type=="touchstart"&&(o=0),d.length==1)o==1&&(M=a.transX,C=a.transY,a.transX-=(e-d[0].pageX)/a.scale,a.transY-=(t-d[0].pageY)/a.scale,a.tooltip.hide(),a.applyTransform(),M==a.transX&&C==a.transY||p.preventDefault()),e=d[0].pageX,t=d[0].pageY;else if(d.length==2)if(o==2)v=Math.sqrt(Math.pow(d[0].pageX-d[1].pageX,2)+Math.pow(d[0].pageY-d[1].pageY,2))/i,a.setScale(s*v,n,r),a.tooltip.hide(),p.preventDefault();else{var k=a.container.selector.getBoundingClientRect();m={top:k.top+window.scrollY,left:k.left+window.scrollX},n=d[0].pageX>d[1].pageX?d[1].pageX+(d[0].pageX-d[1].pageX)/2:d[0].pageX+(d[1].pageX-d[0].pageX)/2,r=d[0].pageY>d[1].pageY?d[1].pageY+(d[0].pageY-d[1].pageY)/2:d[0].pageY+(d[1].pageY-d[0].pageY)/2,n-=m.left,r-=m.top,s=a.scale,i=Math.sqrt(Math.pow(d[0].pageX-d[1].pageX,2)+Math.pow(d[0].pageY-d[1].pageY,2))}o=d.length};this.container.on("touchstart",l).on("touchmove",l)},createRegions:function(){var s,i;for(s in this.regionLabelsGroup=this.regionLabelsGroup||this.canvas.createGroup("jvm-regions-labels-group"),this.mapData.paths)i=new E({map:this,code:s,path:this.mapData.paths[s].path,style:c.merge({},this.params.regionStyle),labelStyle:this.params.regionLabelStyle,labelsGroup:this.regionLabelsGroup,label:this.params.labels&&this.params.labels.regions}),this.regions[s]={config:this.mapData.paths[s],element:i}},createLines:function(s,i,e){var t=this;e===void 0&&(e=!1);var n,r=!1,o=!1;for(var a in this.linesGroup=this.linesGroup||this.canvas.createGroup("jvm-lines-group"),s){var l=s[a];for(var p in i){var m=e?i[p].config:i[p];m.name===l.from&&(r=this.getMarkerPosition(m)),m.name===l.to&&(o=this.getMarkerPosition(m))}r!==!1&&o!==!1&&(n=new V({index:a,map:this,style:c.mergeDeeply({initial:this.params.lineStyle},{initial:l.style||{}}),x1:r.x,y1:r.y,x2:o.x,y2:o.y,group:this.linesGroup}),e&&Object.keys(this.lines).forEach(function(v){v===T(s[0].from,s[0].to)&&t.lines[v].element.remove()}),this.lines[T(l.from,l.to)]={element:n,config:l})}},createMarkers:function(s,i){var e,t,n,r,o=this;for(var a in s===void 0&&(s={}),i===void 0&&(i=!1),this.markersGroup=this.markersGroup||this.canvas.createGroup("jvm-markers-group"),this.markerLabelsGroup=this.markerLabelsGroup||this.canvas.createGroup("jvm-markers-labels-group"),s){if(e=s[a],n=this.getMarkerPosition(e),r=e.coords.join(":"),i){if(c.keys(this.markers).filter(function(l){return o.markers[l]._uid===r}).length)continue;a=c.keys(this.markers).length}n!==!1&&(t=new U({index:a,map:this,style:c.mergeDeeply(this.params.markerStyle,{initial:e.style||{}}),label:this.params.labels&&this.params.labels.markers,labelsGroup:this.markerLabelsGroup,cx:n.x,cy:n.y,group:this.markersGroup,marker:e,isRecentlyCreated:i}),this.markers[a]&&this.removeMarkers([a]),this.markers[a]={_uid:r,config:e,element:t})}},createTooltip:function(){var s=this,i=c.createElement("div","jvm-tooltip");this.tooltip=c.$(document.body.appendChild(i)),this.container.on("mousemove",function(e){if(s.tooltip.selector.style.display==="block"){var t=s.container.selector.querySelector("#jvm-regions-group").getBoundingClientRect(),n=i.getBoundingClientRect(),r=n.height,o=n.width,a=e.clientY<=t.top+r+5,l=e.pageY-r-5,p=e.pageX-o-5;a&&(l+=r+5,p-=10),e.clientX<t.left+o+5&&(p=e.pageX+5+2,a&&(p+=10)),s.tooltip.css({top:l+"px",left:p+"px"})}})},createSeries:function(){for(var s in this.series={markers:[],regions:[]},this.params.series)for(var i=0;i<this.params.series[s].length;i++)this.series[s][i]=new J(this.params.series[s][i],this[s],this)},applyTransform:function(){var s,i,e,t;this.defaultWidth*this.scale<=this.width?(s=(this.width-this.defaultWidth*this.scale)/(2*this.scale),e=(this.width-this.defaultWidth*this.scale)/(2*this.scale)):(s=0,e=(this.width-this.defaultWidth*this.scale)/this.scale),this.defaultHeight*this.scale<=this.height?(i=(this.height-this.defaultHeight*this.scale)/(2*this.scale),t=(this.height-this.defaultHeight*this.scale)/(2*this.scale)):(i=0,t=(this.height-this.defaultHeight*this.scale)/this.scale),this.transY>i?this.transY=i:this.transY<t&&(this.transY=t),this.transX>s?this.transX=s:this.transX<e&&(this.transX=e),this.canvas.applyTransformParams(this.scale,this.transX,this.transY),this.markers&&this.repositionMarkers(),this.lines&&this.repositionLines(),this.repositionLabels()},setFocus:function(s){var i=this;s===void 0&&(s={});var e,t=[];if(s.region?t.push(s.region):s.regions&&(t=s.regions),t.length)return t.forEach(function(a){if(i.regions[a]){var l=i.regions[a].element.shape.getBBox();l&&(e=e===void 0?l:{x:Math.min(e.x,l.x),y:Math.min(e.y,l.y),width:Math.max(e.x+e.width,l.x+l.width)-Math.min(e.x,l.x),height:Math.max(e.y+e.height,l.y+l.height)-Math.min(e.y,l.y)})}}),this.setScale(Math.min(this.width/e.width,this.height/e.height),-(e.x+e.width/2),-(e.y+e.height/2),!0,s.animate);if(s.coords){var n=this.coordsToPoint(s.coords[0],s.coords[1]),r=this.transX-n.x/this.scale,o=this.transY-n.y/this.scale;return this.setScale(s.scale*this.baseScale,r,o,!0,s.animate)}},resize:function(){var s=this.baseScale;this.width/this.height>this.defaultWidth/this.defaultHeight?(this.baseScale=this.height/this.defaultHeight,this.baseTransX=Math.abs(this.width-this.defaultWidth*this.baseScale)/(2*this.baseScale)):(this.baseScale=this.width/this.defaultWidth,this.baseTransY=Math.abs(this.height-this.defaultHeight*this.baseScale)/(2*this.baseScale)),this.scale*=this.baseScale/s,this.transX*=this.baseScale/s,this.transY*=this.baseScale/s},setScale:function(s,i,e,t,n){var r,o,a,l,p,m,v,M,C,d,k=this,z=0,D=Math.abs(Math.round(60*(s-this.scale)/Math.max(s,this.scale)));s>this.params.zoomMax*this.baseScale?s=this.params.zoomMax*this.baseScale:s<this.params.zoomMin*this.baseScale&&(s=this.params.zoomMin*this.baseScale),i!==void 0&&e!==void 0&&(r=s/this.scale,t?(C=i+this.defaultWidth*(this.width/(this.defaultWidth*s))/2,d=e+this.defaultHeight*(this.height/(this.defaultHeight*s))/2):(C=this.transX-(r-1)/s*i,d=this.transY-(r-1)/s*e)),n&&D>0?(a=this.scale,l=(s-a)/D,p=this.transX*this.scale,v=this.transY*this.scale,m=(C*s-p)/D,M=(d*s-v)/D,o=setInterval(function(){z+=1,k.scale=a+l*z,k.transX=(p+m*z)/k.scale,k.transY=(v+M*z)/k.scale,k.applyTransform(),z==D&&(clearInterval(o),k.emit("viewport:changed",[k.scale,k.transX,k.transY]))},10)):(this.transX=C,this.transY=d,this.scale=s,this.applyTransform(),this.emit("viewport:changed",[this.scale,this.transX,this.transY]))},updateSize:function(){this.width=this.container.width(),this.height=this.container.height(),this.resize(),this.canvas.setSize(this.width,this.height),this.applyTransform()},coordsToPoint:function(s,i){var e,t,n,r=X.maps[this.params.map].projection,o=r.centralMeridian;return e=W[r.type](s,i,o),!!(t=this.getInsetForPoint(e.x,e.y))&&(n=t.bbox,e.x=(e.x-n[0].x)/(n[1].x-n[0].x)*t.width*this.scale,e.y=(e.y-n[0].y)/(n[1].y-n[0].y)*t.height*this.scale,{x:e.x+this.transX*this.scale+t.left*this.scale,y:e.y+this.transY*this.scale+t.top*this.scale})},getInsetForPoint:function(s,i){var e,t,n=X.maps[this.params.map].insets;for(e=0;e<n.length;e++)if(s>(t=n[e].bbox)[0].x&&s<t[1].x&&i>t[0].y&&i<t[1].y)return n[e]},getMarkerPosition:function(s){var i=s.coords;return X.maps[this.params.map].projection?this.coordsToPoint.apply(this,i):{x:i[0]*this.scale+this.transX*this.scale,y:i[1]*this.scale+this.transY*this.scale}},repositionLines:function(){var s=!1,i=!1;for(var e in this.lines){for(var t in this.markers){var n=this.markers[t];n.config.name===this.lines[e].config.from&&(s=this.getMarkerPosition(n.config)),n.config.name===this.lines[e].config.to&&(i=this.getMarkerPosition(n.config))}s!==!1&&i!==!1&&this.lines[e].element.setStyle({x1:s.x,y1:s.y,x2:i.x,y2:i.y})}},repositionMarkers:function(){var s;for(var i in this.markers)(s=this.getMarkerPosition(this.markers[i].config))!==!1&&this.markers[i].element.setStyle({cx:s.x,cy:s.y})},repositionLabels:function(){var s=this.params.labels;if(s){if(s.regions)for(var i in this.regions)this.regions[i].element.updateLabelPosition();if(s.markers)for(var e in this.markers)this.markers[e].element.updateLabelPosition()}},visualizeData:function(s){c.isObj(s)&&(this.dataVisualization=new K(s,this))}}),Z={onViewportChange:"viewport:changed",onRegionSelected:"region:selected",onMarkerSelected:"marker:selected",onRegionTooltipShow:"region.tooltip:show",onMarkerTooltipShow:"marker.tooltip:show",onLoaded:"map:loaded",onDestroyed:"map:destroyed"},X=function(){function s(e){if(e===void 0&&(e={}),this.params=c.mergeDeeply(s.defaults,e),!s.maps[this.params.map])throw new Error("Attempt to use map which was not loaded: "+e.map);this.mapData=s.maps[this.params.map],this.regions={},this.markers={},this.lines={},this.defaultWidth=this.mapData.width,this.defaultHeight=this.mapData.height,this.height=0,this.width=0,this.scale=1,this.baseScale=1,this.transX=0,this.transY=0,this.baseTransX=0,this.baseTransY=0,this.isBeingDragged=!1,this.selector=e.selector,window.document.readyState!=="loading"?this.init(e.selector):window.addEventListener("DOMContentLoaded",this.init.bind(this,e.selector))}var i=s.prototype;return i.init=function(e){var t=this.params;this.container=c.$(e).addClass("jvm-container"),this.canvas=new x(this.container,this.width,this.height),this.setBackgroundColor(t.backgroundColor),this.handleContainerEvents(),this.createRegions(),this.updateSize(),this.createLines(t.lines||{},t.markers||{}),this.createMarkers(t.markers),this.handleElementEvents(),this.repositionLabels(),t.showTooltip&&this.createTooltip(),t.zoomButtons&&this.handleZoomButtons(),t.selectedRegions&&this.setSelected("regions",t.selectedRegions),t.selectedMarkers&&this.setSelected("markers",t.selectedMarkers),t.focusOn&&this.setFocus(t.focusOn),t.visualizeData&&this.visualizeData(t.visualizeData),t.bindTouchEvents&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&this.bindContainerTouchEvents(),t.series&&(this.container.append(this.legendHorizontal=c.createElement("div","jvm-series-container jvm-series-h")).append(this.legendVertical=c.createElement("div","jvm-series-container jvm-series-v")),this.createSeries()),this.emit("map:loaded",[this])},i.emit=function(e,t){for(var n in Z)Z[n]===e&&c.isFunc(this.params[n])&&this.params[n].apply(this,t)},i.setBackgroundColor=function(e){this.container.css({backgroundColor:e})},i.getSelected=function(e){var t,n=[];for(t in this[e])this[e][t].element.isSelected&&n.push(t);return n},i.clearSelected=function(e){var t=this;this.getSelected(e).forEach(function(n){t[e][n].element.select(!1)})},i.setSelected=function(e,t){var n=this;t.forEach(function(r){n[e][r]&&n[e][r].element.select(!0)})},i.getSelectedRegions=function(){return this.getSelected("regions")},i.clearSelectedRegions=function(){var e=this;this.getSelected("regions").forEach(function(t){e.regions[t].element.select(!1)})},i.getSelectedMarkers=function(){return this.getSelected("markers")},i.clearSelectedMarkers=function(){var e=this;this.getSelected("markers").forEach(function(t){e.markers[t].element.select(!1)})},i.addMarker=function(e){console.warn("`addMarker` method is depreacted, please use `addMarkers` instead."),this.createMarkers([e],!0)},i.addMarkers=function(e){if(typeof e=="object")return this.createMarkers([e],!0);this.createMarkers(e,!0)},i.removeMarkers=function(e){var t=this;e||(e=Object.keys(this.markers)),e.forEach(function(n){t.markers[n].element.remove(),delete t.markers[n]})},i.addLine=function(e,t,n){n===void 0&&(n={}),this.createLines([{from:e,to:t,style:n}],this.markers,!0)},i.reset=function(){for(var e in this.series)for(var t=0;t<this.series[e].length;t++)this.series[e][t].clear();this.legendHorizontal&&(c.removeElement(this.legendHorizontal),this.legendHorizontal=null),this.legendVertical&&(c.removeElement(this.legendVertical),this.legendVertical=null),this.scale=this.baseScale,this.transX=this.baseTransX,this.transY=this.baseTransY,this.applyTransform(),this.clearSelectedMarkers(),this.clearSelectedRegions(),this.removeMarkers()},i.destroy=function(e){var t=this;e===void 0&&(e=!0);var n=P(),r=this.tooltip.selector,o=Object.keys;c.removeElement(r),o(n).forEach(function(a){Y(n[a].selector,a,n[a].handler)}),this.emit("map:destroyed"),e&&o(this).forEach(function(a){try{delete t[a]}catch{}})},i.extend=function(e,t){s.prototype[e]=t},i.getUtils=function(){return c},s}();X.maps={},X.defaults={map:"world",backgroundColor:"tranparent",draggable:!0,zoomButtons:!0,zoomOnScroll:!0,zoomOnScrollSpeed:3,zoomMax:12,zoomMin:1,zoomAnimate:!0,showTooltip:!0,zoomStep:1.5,bindTouchEvents:!0,lineStyle:{stroke:"#808080",strokeWidth:1,strokeLinecap:"round"},markersSelectable:!1,markersSelectableOne:!1,markerStyle:{initial:{r:7,fill:"#374151",fillOpacity:1,stroke:"#FFF",strokeWidth:5,strokeOpacity:.5},hover:{fill:"#3cc0ff",cursor:"pointer"},selected:{fill:"blue"},selectedHover:{}},markerLabelStyle:{initial:{fontFamily:"Verdana",fontSize:12,fontWeight:500,cursor:"default",fill:"#374151"},hover:{cursor:"pointer"},selected:{},selectedHover:{}},regionsSelectable:!1,regionsSelectableOne:!1,regionStyle:{initial:{fill:"#dee2e8",fillOpacity:1,stroke:"none",strokeWidth:0},hover:{fillOpacity:.7,cursor:"pointer"},selected:{fill:"#9ca3af"},selectedHover:{}},regionLabelStyle:{initial:{fontFamily:"Verdana",fontSize:"12",fontWeight:"bold",cursor:"default",fill:"#35373e"},hover:{cursor:"pointer"}}},Object.assign(X.prototype,Q);var ee=function(){function s(i){if(i===void 0&&(i={}),!i.selector)throw new Error("Selector is not given.");return new X(i)}return s.prototype.addMap=function(i,e){X.maps[i]=e},s}();return window.jsVectorMap=ee});
