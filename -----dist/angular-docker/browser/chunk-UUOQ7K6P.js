import{q as x}from"./chunk-Q7ITDET4.js";import{K as _,O as m,da as g,f as d,fa as h,g as n,ka as p,n as u,qa as f}from"./chunk-ED67IIIV.js";function C(e,i,t){if(!i)return!0;i=i.toLowerCase();for(let s of t)if(e[s]?.toString().toLowerCase()?.includes(i))return!0;return!1}function S(e,i){return e<i?-1:e>i?1:0}var k=(()=>{class e{constructor(){this._loading$=new n(!0),this._search$=new d,this._items$=new n([]),this._total$=new n(0),this.items=[],this._state={page:1,pageSize:10,searchTerm:"",startIndex:1,endIndex:10,sortColumn:"",sortDirection:""},this.pipe=f(x),this._search$.pipe(h(()=>this._loading$.next(!0)),_(200),g(()=>this._search()),m(0),h(()=>this._loading$.next(!1))).subscribe(t=>{this._items$.next(t.items),this._total$.next(t.total)}),this._search$.next()}get items$(){return this._items$.asObservable()}get total$(){return this._total$.asObservable()}get loading$(){return this._loading$.asObservable()}get page(){return this._state.page}get startIndex(){return this._state.startIndex}get endIndex(){return this._state.endIndex}get pageSize(){return this._state.pageSize}get searchTerm(){return this._state.searchTerm}get sortColumn(){return this._state.sortColumn}get sortDirection(){return this._state.sortDirection}set page(t){this._set({page:t})}set startIndex(t){this._set({startIndex:t})}set endIndex(t){this._set({endIndex:t})}set pageSize(t){this._set({pageSize:t})}set searchTerm(t){this._set({searchTerm:t})}set sortColumn(t){this._set({sortColumn:t})}set sortDirection(t){this._set({sortDirection:t})}setItems(t,s){this.items=t,this._set({pageSize:s}),this._set({endIndex:s})}_set(t){Object.assign(this._state,t),this._search$.next()}_search(){let{pageSize:t,page:s,searchTerm:c,sortColumn:a,sortDirection:I}=this._state,$=Object.keys(this.items[0]),r=this.items.filter(o=>C(o,c,$));a&&(r=[...r].sort((o,j)=>{let l=S(o[a],j[a]);return I==="asc"?l:-l}));let b=r.length;this.startIndex=(s-1)*t,this.endIndex=this.startIndex+t;let w=r.slice(this.startIndex,this.endIndex);return this._loading$.next(!1),u({items:w,total:b})}static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{k as a};
